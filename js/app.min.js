var count=2,aenderungskonstante_default=16;function gewinnwahrscheinlichkeit(a,b){return 1/(1+Math.pow(10,(b-a)/150))} angular.module("myApp",[]).controller("myController",["$scope",function(a){a.aenderungskonstante=aenderungskonstante_default;a.new_ttr0="";a.opponents=[{nr:1,ttr:"",gw:"",gw_display:"",new_ttr:""},{nr:2,ttr:"",gw:"",gw_display:"",new_ttr:""}];a.addOpponent=function(){count++;a.opponents.push({nr:count,ttr:"",gw:"",gw_display:"",new_ttr:""})};a.calculate=function(){a.new_ttr0="";for(var b=0;b<a.opponents.length;b++)a.opponents[b].gw="",a.opponents[b].gw_display="",a.opponents[b].new_ttr="";if(!isNaN(a.current_ttr)&& 0<a.current_ttr&&1E4>a.current_ttr){for(var d=0,c=0,b=0;b<a.opponents.length;b++)!isNaN(a.opponents[b].ttr)&&0<a.opponents[b].ttr&&1E4>a.opponents[b].ttr&&(d++,a.opponents[b].gw=gewinnwahrscheinlichkeit(a.current_ttr,a.opponents[b].ttr),c+=a.opponents[b].gw,a.opponents[b].gw_display=Math.round(1E3*a.opponents[b].gw)/1E3);if(0<d&&!isNaN(a.aenderungskonstante)&&0<a.aenderungskonstante)for(a.new_ttr0=Math.round(eval(a.current_ttr-a.aenderungskonstante*c)),b=1;b<=d;b++)a.opponents[b-1].new_ttr=Math.round(eval(a.current_ttr- a.aenderungskonstante*(c-b)))}}}]);